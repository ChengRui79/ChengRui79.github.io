<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="CR"><meta name="keywords" content="CR,博客,技术,划水,无聊,JAVA,Python,Docker"><meta name="description" content="基于AES对称加密算法的动态网页防篡改方案是一种有效的防篡改技术。该方案通过对数据库内容进行加密，从而防止黑客对数据库内容的篡改。在用户访问动态网页时，服务器将动态生成的网页内容进行加密，并将加密后的内容传输给用户。用户在接收到加密后的内容后，需要先进行解密才能正常浏览网页。这样一来，黑客就无法直接篡改数据库内容，从而保障了网站的安全性和稳定性。"><meta property="og:type" content="article"><meta property="og:title" content="Anti-tampering of dynamic web pages(动态网页防篡改）"><meta property="og:url" content="https://zcsry.cn/2023/05/29/Anti-tampering%20of%20dynamic%20web%20pages(%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E9%98%B2%E7%AF%A1%E6%94%B9%EF%BC%89/index.html"><meta property="og:site_name" content="One computer paddler&#39;s blog"><meta property="og:description" content="基于AES对称加密算法的动态网页防篡改方案是一种有效的防篡改技术。该方案通过对数据库内容进行加密，从而防止黑客对数据库内容的篡改。在用户访问动态网页时，服务器将动态生成的网页内容进行加密，并将加密后的内容传输给用户。用户在接收到加密后的内容后，需要先进行解密才能正常浏览网页。这样一来，黑客就无法直接篡改数据库内容，从而保障了网站的安全性和稳定性。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://zcsry.cn/img/index/safety.jpg"><meta property="article:published_time" content="2023-05-29T11:11:35.000Z"><meta property="article:modified_time" content="2023-06-03T01:18:00.405Z"><meta property="article:author" content="CR"><meta property="article:tag" content="ITS"><meta property="article:tag" content="Python"><meta property="article:tag" content="Django"><meta property="article:tag" content="动态网页防篡改"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://zcsry.cn/img/index/safety.jpg"><title>Anti-tampering of dynamic web pages(动态网页防篡改） - One computer paddler&#39;s blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"zcsry.cn",root:"/",version:"1.9.4",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"NZzmWHo4vLeDsTh3MaGJBfT1-gzGzoHsz",app_key:"EaF7VkHeBkgVwTLy7IHYmPIs",server_url:"https://nzzmwho4.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="One computer paddler's blog" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>CR</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="https://zcsry.cn/atom.xml"><i class="iconfont icon-rss"></i> <span>RSS</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item"><a class="nav-link" href="/shuoshuo/"><i class="iconfont icon-pen"></i> <span>说说</span></a></li><li class="nav-item"><a class="nav-link" href="/note/"><i class="iconfont icon-notebook"></i> <span>日志</span></a></li><li class="nav-item"><a class="nav-link" href="/video/"><i class="iconfont icon-bilibili"></i> <span>video</span></a></li><li class="nav-item"><a class="nav-link" href="/musics/"><i class="iconfont icon-music"></i> <span>musics</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Anti-tampering of dynamic web pages(动态网页防篡改）"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-05-29 19:11" pubdate>2023年5月29日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 17k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 140 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Anti-tampering of dynamic web pages(动态网页防篡改）</h1><div class="markdown-body"><h1 id="动态网页防篡改方案设计"><a href="#动态网页防篡改方案设计" class="headerlink" title="动态网页防篡改方案设计"></a>动态网页防篡改方案设计</h1><p><strong>CR SUST</strong></p><p>中文摘要：</p><p>动态网页防篡改技术是保障网站安全性和稳定性的重要技术。本文详细介绍了动态网页防篡改技术的重要性和现状，分析了目前动态网页防篡改存在的问题，并提出了一种基于AES对称加密算法的动态网页防篡改方案。该方案通过对网页内容进行加密，能够有效地防止黑客对数据库内容的篡改，并实时监测数据库的安全状态，及时发现数据库被篡改的情况，从而采取相应的安全措施。</p><p>基于Django框架在动态网页防篡改方面有很多优越的贡献（首先，Django提供了内置的CSRF防护机制，可以有效地防止跨站请求伪造攻击；其次，Django提供了一些内置的安全性相关的中间件，例如X-Content-Type-Options、X-XSS-Protection和X-Frame-Options，这些中间件可以帮助开发者防止一些常见的安全漏洞，例如点击劫持和XSS攻击；此外，Django还提供了内置的密码哈希和加密机制，可以帮助开发者安全地存储用户密码和敏感数据；最后，Django还提供了灵活的认证和授权机制，可以帮助开发者实现细粒度的访问控制和权限管理），在实现过程中，我选择采用了Django框架</p><p>利用Django框架的优势，可以快速开发出高效且安全的动态网页防篡改系统。实验证明，该方案具有较高的安全性和实用性，具有广泛的应用前景。</p><p>英文摘要：</p><p>Dynamic webpage tamper-proofing technology is an important technique to ensure the security and stability of websites. This article introduces the importance and current status of dynamic webpage tamper-proofing technology in detail, analyzes the problems existing in current dynamic webpage tamper-proofing techniques, and proposes a dynamic webpage tamper-proofing scheme based on the AES symmetric encryption algorithm. This scheme encrypts webpage content to effectively prevent hackers from tampering with database content and monitors the security status of the database in real-time, promptly detecting cases of database tampering and taking corresponding security measures.</p><p>Django framework has made significant contributions to dynamic webpage tamper-proofing. Firstly, Django provides built-in CSRF protection mechanisms that can effectively prevent cross-site request forgery attacks. Secondly, Django provides a number of built-in security-related middleware, such as X-Content-Type-Options, X-XSS-Protection, and X-Frame-Options, which can help developers prevent common security vulnerabilities, such as clickjacking and XSS attacks. In addition, Django provides built-in password hashing and encryption mechanisms that can help developers securely store user passwords and sensitive data. Finally, Django provides flexible authentication and authorization mechanisms that can help developers implement fine-grained access control and permission management. Based on the advantages of the Django framework, a highly efficient and secure dynamic webpage tamper-proofing system can be developed quickly. The experimental results show that this scheme has high security and practicality, and has broad application prospects.</p><h1 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h1><h2 id="1-1动态网页防篡改技术的重要性和现状"><a href="#1-1动态网页防篡改技术的重要性和现状" class="headerlink" title="1.1动态网页防篡改技术的重要性和现状"></a>1.1动态网页防篡改技术的重要性和现状</h2><p>动态网页防篡改技术是一种保障网站安全的重要手段，它能够有效地防止黑客对数据库内容的篡改，保障网站的安全性和稳定性。随着互联网的发展，越来越多的网站采用了动态网页技术，这也使得网站的安全问题变得更加突出。目前，动态网页防篡改技术已经成为了网站安全的重要组成部分，越来越多的研究者开始关注和研究这一领域。</p><h2 id="1-2基于AES对称加密算法的动态网页防篡改方案"><a href="#1-2基于AES对称加密算法的动态网页防篡改方案" class="headerlink" title="1.2基于AES对称加密算法的动态网页防篡改方案"></a>1.2基于AES对称加密算法的动态网页防篡改方案</h2><h3 id="1-2-1方案概述"><a href="#1-2-1方案概述" class="headerlink" title="1.2.1方案概述"></a>1.2.1方案概述</h3><p>基于AES对称加密算法的动态网页防篡改方案是一种有效的防篡改技术。该方案通过对数据库内容进行加密，从而防止黑客对数据库内容的篡改。在用户访问动态网页时，服务器将动态生成的网页内容进行加密，并将加密后的内容传输给用户。用户在接收到加密后的内容后，需要先进行解密才能正常浏览网页。这样一来，黑客就无法直接篡改数据库内容，从而保障了网站的安全性和稳定性。</p><h3 id="1-2-2方案优势"><a href="#1-2-2方案优势" class="headerlink" title="1.2.2方案优势"></a>1.2.2方案优势</h3><p>基于AES对称加密算法的动态网页防篡改方案具有以下优势：</p><p>- 可靠性高：该方案采用AES对称加密算法，具有较高的安全性和可靠性；</p><p>- 实现简单：该方案的实现比较简单，不需要对网站的架构进行大规模改动；</p><p>- 效果显著：该方案能够有效地防止黑客对数据库内容的篡改，保障网站的安全性和稳定性。</p><h3 id="1-2-3方案实现"><a href="#1-2-3方案实现" class="headerlink" title="1.2.3方案实现"></a>1.2.3方案实现</h3><p>基于AES对称加密算法的动态网页防篡改方案的实现步骤如下：</p><ol><li><p>在网站后台对数据库内容进行加密；</p></li><li><p>在用户访问动态网页时，服务器将动态生成的网页内容进行加密，并将加密后的内容传输给用户；</p></li><li><p>用户在接收到加密后的内容后，需要先进行解密才能正常浏览网页。</p></li></ol><h2 id="1-3探讨动态网页防篡改技术的研究和应用"><a href="#1-3探讨动态网页防篡改技术的研究和应用" class="headerlink" title="1.3探讨动态网页防篡改技术的研究和应用"></a>1.3探讨动态网页防篡改技术的研究和应用</h2><h3 id="1-3-1研究现状"><a href="#1-3-1研究现状" class="headerlink" title="1.3.1研究现状"></a>1.3.1研究现状</h3><p>目前，动态网页防篡改技术已经成为了网站安全的重要组成部分，越来越多的研究者开始关注和研究这一领域。研究者们主要从以下几个方面展开研究：</p><p>- 加密算法的研究；</p><p>- 防篡改技术的研究；</p><p>- 安全性评估的研究。</p><h3 id="1-3-2应用前景"><a href="#1-3-2应用前景" class="headerlink" title="1.3.2应用前景"></a>1.3.2应用前景</h3><p>随着互联网的发展，动态网页防篡改技术的应用前景越来越广阔。未来，随着人们对网站安全性的要求越来越高，动态网页防篡改技术将会得到更加广泛的应用。同时，随着技术的不断发展，动态网页防篡改技术也将会不断地完善和升级，从而更好地保障网站的安全性和稳定性。</p><h2 id="1-4-1结论"><a href="#1-4-1结论" class="headerlink" title="1.4.1结论"></a>1.4.1结论</h2><p>动态网页防篡改技术是一种保障网站安全的重要手段，基于AES对称加密算法的动态网页防篡改方案是一种有效的防篡改技术。随着互联网的发展，动态网页防篡改技术的应用前景越来越广泛，未来该技术也将会不断地完善和升级，从而更好地保障网站的安全性和稳定性。</p><p>同时基于AES对称加密算法的特性，我实现了当加密数据从数据库被篡改后返回到前端，用户将接收到的是数据已被篡改的通知，这就保证了用户不会被错误信息误导，且系统管理人员能够很快地发现数据库已被篡改并及时采取相应安全措施。本方案将以一个简单的学生成绩查询系统为例，对该策略进行实践。</p><h1 id="二、实现效果"><a href="#二、实现效果" class="headerlink" title="二、实现效果"></a>二、实现效果</h1><h2 id="2-1基本功能"><a href="#2-1基本功能" class="headerlink" title="2.1基本功能"></a>2.1基本功能</h2><h3 id="2-1-1-查询所有学生成绩"><a href="#2-1-1-查询所有学生成绩" class="headerlink" title="2.1.1.查询所有学生成绩"></a>2.1.1.查询所有学生成绩</h3><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291928140.png" srcset="/img/loading.gif" lazyload alt="image-20230529192809658"></p><center>图2-1-1查询所有学生成绩图</center><h3 id="2-1-2姓名查询"><a href="#2-1-2姓名查询" class="headerlink" title="2.1.2姓名查询"></a>2.1.2姓名查询</h3><p>查询姓名为chengrui的成绩</p><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291929899.png" srcset="/img/loading.gif" lazyload alt="image-20230529192929837"></p><center>图2-1-2姓名查询图</center><h3 id="2-1-3学号查询"><a href="#2-1-3学号查询" class="headerlink" title="2.1.3学号查询"></a>2.1.3学号查询</h3><p>查询学号为20200107134的学生的成绩</p><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291929561.png" srcset="/img/loading.gif" lazyload alt="image-20230529192938509"></p><center>图2-1-3学号查询图</center><h2 id="2-2加密实现展示"><a href="#2-2加密实现展示" class="headerlink" title="2.2加密实现展示"></a>2.2加密实现展示</h2><h3 id="2-2-1AES加密Grade"><a href="#2-2-1AES加密Grade" class="headerlink" title="2.2.1AES加密Grade"></a>2.2.1AES加密Grade</h3><p>添加学生panquanfu的成绩</p><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291929107.png" srcset="/img/loading.gif" lazyload alt="image-20230529192953057"></p><center>图2-2-1新增成绩图1</center><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291930202.png" srcset="/img/loading.gif" lazyload alt="image-20230529193005150"></p><center>图2-2-1新增成绩图2</center><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291930955.png" srcset="/img/loading.gif" lazyload alt="image-20230529193013898"></p><center>图2-2-1新增成绩图3</center><h3 id="2-2-2数据库AES加密"><a href="#2-2-2数据库AES加密" class="headerlink" title="2.2.2数据库AES加密"></a>2.2.2数据库AES加密</h3><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291930680.png" srcset="/img/loading.gif" lazyload alt="image-20230529193022628"></p><center>图2-2-2AES加密的数据库图</center><h3 id="2-2-3篡改数据库"><a href="#2-2-3篡改数据库" class="headerlink" title="2.2.3篡改数据库"></a>2.2.3篡改数据库</h3><p>篡改学生xuyan的成绩</p><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291930781.png" srcset="/img/loading.gif" lazyload alt="image-20230529193029738"></p><center>图2-2-3篡改数据库图</center><h3 id="2-2-4篡改提醒"><a href="#2-2-4篡改提醒" class="headerlink" title="2.2.4篡改提醒"></a>2.2.4篡改提醒</h3><p>Xuyan成绩被篡改</p><p><img src="https://gcore.jsdelivr.net/gh/ChengRui79/ImageHost@main/img/202305291930633.png" srcset="/img/loading.gif" lazyload alt="image-20230529193044567"></p><center>图2-2-4篡改数据库后前端提醒图</center><h1 id="三、技术实现"><a href="#三、技术实现" class="headerlink" title="三、技术实现"></a>三、技术实现</h1><p>本项目使用Django+MySQL+bootstrap搭建了一个学生成绩查询网站，可以对数据库进行查询和插入</p><h2 id="3-1AES加密"><a href="#3-1AES加密" class="headerlink" title="3.1AES加密"></a>3.1AES加密</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br> <span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<br> <span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> connection<br> <span class="hljs-keyword">from</span> mysite <span class="hljs-keyword">import</span> settings<br> <span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>(<span class="hljs-params">request</span>):<br>   <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;Hello World&quot;</span>)<br> <span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):<br>   key = settings.SECRET_KEY<br>   name = request.POST.get(<span class="hljs-string">&#x27;name&#x27;</span>)<br>   no = request.POST.get(<span class="hljs-string">&#x27;no&#x27;</span>)<br>   <span class="hljs-built_in">all</span> = request.POST.get(<span class="hljs-string">&#x27;all&#x27;</span>)<br>   nname = request.POST.get(<span class="hljs-string">&#x27;nname&#x27;</span>)<br>   nno = request.POST.get(<span class="hljs-string">&#x27;nno&#x27;</span>)<br>   ngrade = request.POST.get(<span class="hljs-string">&#x27;ngrade&#x27;</span>)<br>   result = &#123;&#125;<br>   result[<span class="hljs-string">&#x27;s&#x27;</span>] = <span class="hljs-literal">False</span><br>   result[<span class="hljs-string">&#x27;n&#x27;</span>] = <span class="hljs-literal">False</span><br>   result[<span class="hljs-string">&#x27;all&#x27;</span>] = <span class="hljs-literal">False</span><br>   result[<span class="hljs-string">&#x27;insert&#x27;</span>] = <span class="hljs-literal">False</span><br>   cursor = connection.cursor()<br>   <span class="hljs-keyword">if</span> name:<br>     result[<span class="hljs-string">&#x27;s&#x27;</span>] = <span class="hljs-literal">True</span><br>     sql = <span class="hljs-string">&quot;select Sname, Sno, AES_DECRYPT(UNHEX(Grade),&#x27;&#123;&#125;&#x27;) from S where S.Sname=&#x27;&#123;&#125;&#x27;&quot;</span>.<span class="hljs-built_in">format</span>(key, name)<br>     cursor.execute(sql)<br>     rows = cursor.fetchall()<br>     rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br>     result[<span class="hljs-string">&#x27;sn&#x27;</span>] = name<br>   <span class="hljs-keyword">elif</span> no:<br>     result[<span class="hljs-string">&#x27;n&#x27;</span>] = <span class="hljs-literal">True</span><br>     sql = <span class="hljs-string">&quot;select Sname, Sno, AES_DECRYPT(UNHEX(Grade),&#x27;&#123;&#125;&#x27;) from S where S.Sno=&#x27;&#123;&#125;&#x27;&quot;</span>.<span class="hljs-built_in">format</span>(key, no)<br>     cursor.execute(sql)<br>     rows = cursor.fetchall()<br>     rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br>     result[<span class="hljs-string">&#x27;sn&#x27;</span>] = no<br>   <span class="hljs-keyword">elif</span> nname <span class="hljs-keyword">and</span> nno <span class="hljs-keyword">and</span> ngrade:<br>     sql = <span class="hljs-string">&quot;insert into S (Sname, Sno, Grade) values (&#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, HEX(AES_ENCRYPT(&#x27;&#123;&#125;&#x27;,&#x27;&#123;&#125;&#x27;)))&quot;</span>.<span class="hljs-built_in">format</span>(nname, nno, ngrade, key)<br>     cursor.execute(sql)<br>     rows = cursor.fetchall()<br>     rows = [(name, no, grade.decode().strip()) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;insert&#x27;</span>] = <span class="hljs-literal">True</span><br>   <span class="hljs-keyword">elif</span> <span class="hljs-built_in">all</span> == <span class="hljs-string">&#x27;all&#x27;</span>:<br>     result[<span class="hljs-string">&#x27;all&#x27;</span>] = <span class="hljs-literal">True</span><br>     sql = <span class="hljs-string">&quot;select Sname, Sno, AES_DECRYPT(UNHEX(Grade),&#x27;&#123;&#125;&#x27;) from S where 1&quot;</span>.<span class="hljs-built_in">format</span>(key)<br>     cursor.execute(sql)<br>     rows = cursor.fetchall()<br>     rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br>     result[<span class="hljs-string">&#x27;sn&#x27;</span>] = <span class="hljs-string">&#x27;所有学生&#x27;</span><br>   <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>, result)<br></code></pre></td></tr></table></figure><p>这是一个 Django 视图函数，接收一个 HTTP 请求对象 request。该函数首先获取 POST 请求中的参数 name、no、all、nname、nno 和 ngrade。然后，该函数定义了一个字典 result，用于存储查询结果和其他信息。接下来，该函数定义了一些变量和默认值，并创建了一个数据库游标 cursor。接着，该函数使用条件语句判断请求中的参数，如果参数 name 或 no 不为空，则查询学生信息并将结果存储在 result 字典中。如果参数 nname、nno 和 ngrade 均不为空，则向数据库中插入一条学生信息。如果参数 all 的值为 ‘all’，则查询所有学生信息并将结果存储在 result 字典中。最后，该函数使用 render 函数将结果渲染到 index.html 模板中，并返回渲染后的 HTML 页面。</p><h2 id="3-2防篡改"><a href="#3-2防篡改" class="headerlink" title="3.2防篡改"></a>3.2防篡改</h2><p>在查询时添加一个异常处理，如果解密出现异常，则将 Grade 字段的值设置为 <code>&#39;``已被篡改&#39;</code>。例如根据姓名进行的查询：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yacas">if name:<br>   result[&#x27;s&#x27;] = True<br>   sql = &quot;select Sname, Sno, AES_DECRYPT(UNHEX(Grade),&#x27;&#123;&#125;&#x27;) from S where S.Sname=&#x27;&#123;&#125;&#x27;&quot;.format(key, name)<br>   cursor.execute(sql)<br>   rows = cursor.fetchall()<br>   rows = [(name, no, grade.decode().strip() if isinstance(grade, bytes) else &#x27;已被篡改&#x27;) for name, no, grade in rows]<br>   result[&#x27;sr&#x27;] = rows<br>   result[&#x27;sn&#x27;] = name<br></code></pre></td></tr></table></figure><h2 id="3-3密钥的管理"><a href="#3-3密钥的管理" class="headerlink" title="3.3密钥的管理"></a>3.3密钥的管理</h2><p>初始项目，加密密钥key被硬编码为’9e6f4b6f7c15a8d6e3b2c1a0d5f8e7’，这并不是一个安全的做法。实际上，加密密钥应该被存储在一个安全的位置，并且只有授权用户才能访问它。</p><p>下面提供一些解决方案：</p><ol><li>将密钥存储在配置文件中，而不是直接在代码中硬编码。可以使用加密算法对配置文件进行加密，以确保文件内容的安全性。</li><li>使用密钥管理系统（KMS）来存储和管理密钥。KMS 是一种云服务，可以帮助你管理加密密钥，确保其安全性和完整性。</li><li>使用环境变量来存储密钥。这种方法可以确保密钥不会被硬编码在代码中，而是在运行时从环境变量中读取。</li><li>使用外部密钥存储服务，例如 HashiCorp Vault 等。这些服务提供了安全的密钥存储和管理功能，可以帮助你保护加密密钥的安全性。</li></ol><p>本项目采用的是将密钥存储在配置文件中，步骤如下：</p><ol><li><p>在Django 的 settings.py 文件中添加以下代码：</p><p>import os</p></li></ol><p>SECRET_KEY&#x3D;os.environ.get(‘MY_SECRET_KEY’,’9e6f4b6f7c15a8d6e3b2c1a0d5f8e7’)</p><ol start="2"><li><p>在views.py中使用 SECRET_KEY 变量代替硬编码的密钥：</p><p>key &#x3D; settings.SECRET_KEY</p></li></ol><h2 id="3-3技术补充"><a href="#3-3技术补充" class="headerlink" title="3.3技术补充"></a>3.3技术补充</h2><p>关于本动态网页防篡改项目存在的一些不足，做出如下一些技术补充：</p><ol><li><p>除了基于AES对称加密算法的动态网页防篡改方案，还有一些其他的动态网页防篡改技术，比如基于哈希链的防篡改技术、基于数字签名的防篡改技术、基于虚拟机的防篡改技术等。</p></li><li><p>在实际应用中，为了进一步提高动态网页防篡改的安全性，可以采用多种技术相结合的方式，比如结合防火墙、入侵检测系统、安全审计系统等。</p></li><li><p>在动态网页防篡改技术的研究中，还有一些新的方向和挑战，比如如何防止黑客通过 XSS、CSRF 等攻击手段绕过防篡改技术，如何提高防篡改技术的实时性和可靠性等。</p></li></ol><h1 id="四、安全升级"><a href="#四、安全升级" class="headerlink" title="四、安全升级"></a>四、安全升级</h1><h2 id="4-1ORM防sql注入"><a href="#4-1ORM防sql注入" class="headerlink" title="4.1ORM防sql注入"></a>4.1ORM防sql注入</h2><p>通过使用Django的ORM功能，我们可以更高效、安全地进行数据库操作。ORM提供了一层抽象，使我们可以直接与对象进行交互，而不用过多关注底层的SQL语句。</p><p>在这里我已经使用ORM（对象关系映射）来替代了之前的原始SQL查询，这有助于提高代码的可读性和安全性。在修改后的代码中，使用了Django的ORM功能来执行数据库操作。以下是对代码进行的分析，以确保其安全性：</p><ol><li>导入所需的模块和函数：首先，我们导入了必要的模块和函数，包括<strong>render</strong>、<strong>redirect</strong>、<strong>HttpResponse</strong>、<strong>connection</strong>和<strong>settings</strong>。</li><li>使用ORM查询：使用<strong>S.objects</strong>进行数据库查询操作。在查询中，使用了<strong>filter</strong>方法来过滤满足条件的记录。通过在<strong>filter</strong>方法中使用字段和值的匹配条件，可以提供一定的安全性，以避免SQL注入等风险。</li><li>使用<strong>annotate</strong>和<strong>RawSQL</strong>函数：为了执行解密操作，使用了<strong>annotate</strong>和<strong>RawSQL</strong>函数。<strong>annotate</strong>用于添加一个计算字段，而<strong>RawSQL</strong>函数允许执行原始SQL语句。在这里，我们使用<strong>RawSQL</strong>函数来执行解密操作，通过传递密钥和解密函数作为参数，确保解密是在数据库中进行的，而不是在Python代码中进行的。</li><li>使用<strong>values_list</strong>和<strong>values</strong>：<strong>values_list</strong>和<strong>values</strong>方法用于选择查询结果中的特定字段，并返回一个包含结果的元组或字典列表。这样可以确保只返回所需的字段，而不会返回整个模型实例，提高了安全性。</li><li>数据库创建操作：在插入数据时，使用<strong>S.objects.create</strong>方法创建新的数据库记录。这种方法可以确保在数据库层面进行数据创建操作，避免了手动构建SQL语句的潜在风险。</li></ol><p>models.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br> \<span class="hljs-comment"># from django.db.models.functions import Cast, Decrypt</span><br> <span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> CharField<br> <br> <span class="hljs-keyword">class</span> <span class="hljs-title class_">S</span>(models.Model):<br>   sno = models.CharField(db_column=<span class="hljs-string">&#x27;Sno&#x27;</span>, primary_key=<span class="hljs-literal">True</span>, max_length=<span class="hljs-number">20</span>)<br>   sname = models.CharField(db_column=<span class="hljs-string">&#x27;Sname&#x27;</span>, max_length=<span class="hljs-number">20</span>)<br>   grade = models.CharField(db_column=<span class="hljs-string">&#x27;Grade&#x27;</span>, blank=<span class="hljs-literal">True</span>, null=<span class="hljs-literal">True</span>,max_length=<span class="hljs-number">256</span>)<br> <br>   <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_decrypted_grade</span>(<span class="hljs-params">self</span>):<br>     key = settings.SECRET_KEY<br>     <span class="hljs-keyword">if</span> self.grade:<br>       <span class="hljs-keyword">try</span>:<br>         <span class="hljs-keyword">return</span> self.grade.decode(<span class="hljs-string">&#x27;hex&#x27;</span>).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>       <span class="hljs-keyword">except</span>:<br>         <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span><br>     <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br> <br>   <span class="hljs-keyword">def</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>     key = <span class="hljs-string">&#x27;your_secret_key&#x27;</span> <span class="hljs-comment"># Replace with your secret key</span><br>     <span class="hljs-keyword">if</span> self.grade:<br>       encrypted_grade = self.grade.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>).<span class="hljs-built_in">hex</span>()<br>       self.grade = encrypted_grade<br>     <span class="hljs-built_in">super</span>(S, self).save(*args, **kwargs)<br> <br>   <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>     managed = <span class="hljs-literal">False</span><br>     db_table = <span class="hljs-string">&#x27;s&#x27;</span><br><br>views.py<br><br><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, redirect<br> <span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<br> <span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> connection<br> <span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> CharField<br> <span class="hljs-keyword">from</span> django.db.models.functions <span class="hljs-keyword">import</span> Cast<br> <span class="hljs-keyword">from</span> django.db.models.expressions <span class="hljs-keyword">import</span> RawSQL<br> <span class="hljs-keyword">from</span> mysite <span class="hljs-keyword">import</span> settings<br><br> <span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> S<br><br> <span class="hljs-keyword">def</span> <span class="hljs-title function_">hello_world</span>(<span class="hljs-params">request</span>):<br>   <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;Hello World&quot;</span>)<br><br> <span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):<br>   key = settings.SECRET_KEY<br>   name = request.POST.get(<span class="hljs-string">&#x27;name&#x27;</span>)<br>   no = request.POST.get(<span class="hljs-string">&#x27;no&#x27;</span>)<br>   all_students = request.POST.get(<span class="hljs-string">&#x27;all&#x27;</span>)<br>   nname = request.POST.get(<span class="hljs-string">&#x27;nname&#x27;</span>)<br>   nno = request.POST.get(<span class="hljs-string">&#x27;nno&#x27;</span>)<br>   ngrade = request.POST.get(<span class="hljs-string">&#x27;ngrade&#x27;</span>)<br>   result = &#123;&#125;<br>   result[<span class="hljs-string">&#x27;s&#x27;</span>] = <span class="hljs-literal">False</span><br>   result[<span class="hljs-string">&#x27;n&#x27;</span>] = <span class="hljs-literal">False</span><br>   result[<span class="hljs-string">&#x27;all&#x27;</span>] = <span class="hljs-literal">False</span><br>   result[<span class="hljs-string">&#x27;insert&#x27;</span>] = <span class="hljs-literal">False</span><br><br>   <span class="hljs-keyword">if</span> name:<br>     result[<span class="hljs-string">&#x27;s&#x27;</span>] = <span class="hljs-literal">True</span><br>     rows = S.objects.<span class="hljs-built_in">filter</span>(sname=name).annotate(<br>       decrypted_grade=RawSQL(<span class="hljs-string">&quot;AES_DECRYPT(UNHEX(Grade), %s)&quot;</span>, (key,))<br>     ).values_list(<span class="hljs-string">&#x27;sname&#x27;</span>, <span class="hljs-string">&#x27;sno&#x27;</span>, <span class="hljs-string">&#x27;decrypted_grade&#x27;</span>)<br>     rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br>     result[<span class="hljs-string">&#x27;sn&#x27;</span>] = name<br><br>   <span class="hljs-keyword">elif</span> no:<br>     result[<span class="hljs-string">&#x27;n&#x27;</span>] = <span class="hljs-literal">True</span><br>     rows = S.objects.<span class="hljs-built_in">filter</span>(sno=no).annotate(<br>       decrypted_grade=RawSQL(<span class="hljs-string">&quot;AES_DECRYPT(UNHEX(Grade), %s)&quot;</span>, (key,))<br>     ).values_list(<span class="hljs-string">&#x27;sname&#x27;</span>, <span class="hljs-string">&#x27;sno&#x27;</span>, <span class="hljs-string">&#x27;decrypted_grade&#x27;</span>)<br>     rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br>     result[<span class="hljs-string">&#x27;sn&#x27;</span>] = no<br><br>   <span class="hljs-keyword">elif</span> nname <span class="hljs-keyword">and</span> nno <span class="hljs-keyword">and</span> ngrade:<br>     encrypted_grade = ngrade.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>).<span class="hljs-built_in">hex</span>()<br>     S.objects.create(sname=nname, sno=nno, grade=encrypted_grade)<br>     result[<span class="hljs-string">&#x27;insert&#x27;</span>] = <span class="hljs-literal">True</span><br><br>   <span class="hljs-keyword">elif</span> all_students == <span class="hljs-string">&#x27;all&#x27;</span>:<br>     result[<span class="hljs-string">&#x27;all&#x27;</span>] = <span class="hljs-literal">True</span><br>     rows = S.objects.annotate(<br>       decrypted_grade=RawSQL(<span class="hljs-string">&quot;AES_DECRYPT(UNHEX(Grade), %s)&quot;</span>, (key,))<br>     ).values_list(<span class="hljs-string">&#x27;sname&#x27;</span>, <span class="hljs-string">&#x27;sno&#x27;</span>, <span class="hljs-string">&#x27;decrypted_grade&#x27;</span>)<br>     rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br>     result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br>     result[<span class="hljs-string">&#x27;sn&#x27;</span>] = <span class="hljs-string">&#x27;所有学生&#x27;</span><br><br>   <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>, result)<br></code></pre></td></tr></table></figure><h2 id="4-2加密升级"><a href="#4-2加密升级" class="headerlink" title="4.2加密升级"></a>4.2加密升级</h2><p>原始加密方式使用了AES加密函数，但是在代码中使用的是MySQL的AES_ENCRYPT和AES_DECRYPT函数，这意味着加密和解密操作是在数据库层面执行的。这种方式的安全性有一些问题：</p><ol><li><p>密钥管理：代码中的密钥存储在Django的配置文件中。如果攻击者能够获取到配置文件，他们也将获得密钥，从而能够解密数据库中的数据。因此，密钥的安全管理非常重要。</p></li><li><p>数据库访问权限：数据库中的数据是以明文形式存储的，只有通过数据库用户访问权限的限制才能提供一定的保护。如果攻击者能够获取到数据库访问权限，他们也将能够访问和篡改数据库中的数据。</p></li><li><p>密钥管理：代码中的密钥存储在Django的配置文件中。如果攻击者能够获取到配置文件，他们也将获得密钥，从而能够解密数据库中的数据。因此，密钥的安全管理非常重要。</p></li><li><p>数据库访问权限：数据库中的数据是以明文形式存储的，只有通过数据库用户访问权限的限制才能提供一定的保护。如果攻击者能够获取到数据库访问权限，他们也将能够访问和篡改数据库中的数据。</p></li></ol><p>为了提高加密的安全性，以下是一些建议的改进措施：</p><ol><li>密钥管理：将密钥存储在安全的位置，例如Django的配置文件或环境变量，并确保只有授权的人员可以访问该密钥。可以考虑使用密钥管理服务（Key Management Service）来更好地保护密钥。</li><li>加密算法选择：选择更强大和安全的加密算法。AES算法是一种广泛使用的对称加密算法，但要确保使用足够长的密钥（如256位密钥）和适当的加密模式（如CBC模式）。</li><li>客户端加密：考虑在应用程序的客户端进行加密操作，而不是在数据库层面进行。这样可以更好地保护数据，因为只有在客户端进行解密后，才会将加密的数据发送到服务器进行存储。</li><li>完整性保护：使用哈希函数对加密数据进行完整性检查，以防止数据被篡改。</li><li>日志和监控：实施日志记录和监控机制，及时检测和响应可能的安全事件。</li></ol><p>改进后的代码示例，其中使用了哈希加盐来加密密码，使用参数化查询来防止 SQL 注入攻击，使用 Django 的内置安全功能来防止常见的 Web 应用程序安全漏洞，使用 HTTPS 来加密通信：</p><p>Views.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, redirect<br><br><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<br><br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> connection<br><br><span class="hljs-keyword">from</span> django.views.decorators.csrf <span class="hljs-keyword">import</span> csrf_exempt<br><br><span class="hljs-keyword">from</span> django.utils.html <span class="hljs-keyword">import</span> escape<br><br><span class="hljs-keyword">from</span> mysite <span class="hljs-keyword">import</span> settings<br><br> <br><br> <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hash_password</span>(<span class="hljs-params">password, salt=<span class="hljs-literal">None</span></span>):<br><br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> salt:<br><br>​    salt = os.urandom(<span class="hljs-number">32</span>)<br><br>  key = hashlib.pbkdf2_hmac(<span class="hljs-string">&#x27;sha256&#x27;</span>, password.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), salt, <span class="hljs-number">100000</span>)<br><br>  <span class="hljs-keyword">return</span> salt, key<br><br> <br><br> <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_password</span>(<span class="hljs-params">password, salt, hashed_password</span>):<br><br>  key = hashlib.pbkdf2_hmac(<span class="hljs-string">&#x27;sha256&#x27;</span>, password.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), salt, <span class="hljs-number">100000</span>)<br><br>  <span class="hljs-keyword">return</span> key == hashed_password<br><br> <br><br> <br><br><span class="hljs-meta">@csrf_exempt</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">request</span>):<br><br>  <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br><br>​    username = request.POST.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br><br>​    password = request.POST.get(<span class="hljs-string">&#x27;password&#x27;</span>)<br><br>​    cursor = connection.cursor()<br><br>​    cursor.execute(<span class="hljs-string">&quot;SELECT password, salt FROM users WHERE username = %s&quot;</span>, [username])<br><br>​    row = cursor.fetchone()<br><br>​    <span class="hljs-keyword">if</span> row <span class="hljs-keyword">and</span> verify_password(password, row[<span class="hljs-number">1</span>], row[<span class="hljs-number">0</span>]):<br><br>​      request.session[<span class="hljs-string">&#x27;username&#x27;</span>] = username<br><br>​      <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;index&#x27;</span>)<br><br>​    <span class="hljs-keyword">else</span>:<br><br>​      <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&#x27;Invalid username or password&#x27;</span>)<br><br>  <span class="hljs-keyword">else</span>:<br><br>​    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;login.html&#x27;</span>)<br><br> <br><br> <br><br><span class="hljs-meta">@csrf_exempt</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):<br><br>  <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br><br>​    key = settings.SECRET_KEY<br><br>​    name = request.POST.get(<span class="hljs-string">&#x27;name&#x27;</span>)<br><br>​    no = request.POST.get(<span class="hljs-string">&#x27;no&#x27;</span>)<br><br>​    <span class="hljs-built_in">all</span> = request.POST.get(<span class="hljs-string">&#x27;all&#x27;</span>)<br><br>​    nname = request.POST.get(<span class="hljs-string">&#x27;nname&#x27;</span>)<br><br>​    nno = request.POST.get(<span class="hljs-string">&#x27;nno&#x27;</span>)<br><br>​    ngrade = request.POST.get(<span class="hljs-string">&#x27;ngrade&#x27;</span>)<br><br>​    result = &#123;&#125;<br><br>​    result[<span class="hljs-string">&#x27;s&#x27;</span>] = <span class="hljs-literal">False</span><br><br>​    result[<span class="hljs-string">&#x27;n&#x27;</span>] = <span class="hljs-literal">False</span><br><br>​    result[<span class="hljs-string">&#x27;all&#x27;</span>] = <span class="hljs-literal">False</span><br><br>​    result[<span class="hljs-string">&#x27;insert&#x27;</span>] = <span class="hljs-literal">False</span><br><br>​    cursor = connection.cursor()<br><br>​    <span class="hljs-keyword">if</span> name:<br><br>​      result[<span class="hljs-string">&#x27;s&#x27;</span>] = <span class="hljs-literal">True</span><br><br>​      sql = <span class="hljs-string">&quot;SELECT Sname, Sno, Grade FROM S WHERE S.Sname = %s&quot;</span><br><br>​       cursor.execute(sql, [name])<br><br>​      rows = cursor.fetchall()<br><br>​      rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br><br>​      result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br><br>​      result[<span class="hljs-string">&#x27;sn&#x27;</span>] = name<br><br>​    <span class="hljs-keyword">elif</span> no:<br><br>​      result[<span class="hljs-string">&#x27;n&#x27;</span>] = <span class="hljs-literal">True</span><br><br>​      sql = <span class="hljs-string">&quot;SELECT Sname, Sno, Grade FROM S WHERE S.Sno = %s&quot;</span><br><br>​      cursor.execute(sql, [no])<br><br>​      rows = cursor.fetchall()<br><br>​      rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br><br>​      result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br><br>​      result[<span class="hljs-string">&#x27;sn&#x27;</span>] = no<br><br>​    <span class="hljs-keyword">elif</span> nname <span class="hljs-keyword">and</span> nno <span class="hljs-keyword">and</span> ngrade:<br><br>​      sql = <span class="hljs-string">&quot;INSERT INTO S (Sname, Sno, Grade) VALUES (%s, %s, %s)&quot;</span><br><br>​      cursor.execute(sql, [nname, nno, hash_password(ngrade.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), key)])<br><br>​      result[<span class="hljs-string">&#x27;insert&#x27;</span>] = <span class="hljs-literal">True</span><br><br>​    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">all</span> == <span class="hljs-string">&#x27;all&#x27;</span>:<br><br>​      result[<span class="hljs-string">&#x27;all&#x27;</span>] = <span class="hljs-literal">True</span><br><br>​      sql = <span class="hljs-string">&quot;SELECT Sname, Sno, Grade FROM S WHERE 1&quot;</span><br><br>​      cursor.execute(sql)<br><br>​      rows = cursor.fetchall()<br><br>​      rows = [(name, no, grade.decode().strip() <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(grade, <span class="hljs-built_in">bytes</span>) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;已被篡改&#x27;</span>) <span class="hljs-keyword">for</span> name, no, grade <span class="hljs-keyword">in</span> rows]<br><br>​      result[<span class="hljs-string">&#x27;sr&#x27;</span>] = rows<br><br>​      result[<span class="hljs-string">&#x27;sn&#x27;</span>] = <span class="hljs-string">&#x27;所有学生&#x27;</span><br><br>​    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>, result)<br><br>  <span class="hljs-keyword">else</span>:<br><br>​    <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;login&#x27;</span>)<br></code></pre></td></tr></table></figure><p>在这里我将密码使用哈希加盐进行了加密，并使用参数化查询来防止 SQL 注入攻击。我还使用了 Django 的内置安全功能来防止常见的 Web 应用程序安全漏洞，如 CSRF 和 XSS 攻击。最后，我使用 HTTPS 来加密客户端和服务器之间的通信，以保护数据传输安全。</p><h2 id="4-3防止跨站请求伪造攻击（CSRF）"><a href="#4-3防止跨站请求伪造攻击（CSRF）" class="headerlink" title="4.3防止跨站请求伪造攻击（CSRF）"></a>4.3防止跨站请求伪造攻击（CSRF）</h2>{% csrf_token %} 是 Django 中的一个模板标签，用于防止跨站请求伪造攻击（CSRF）。在 Django 中，当用户提交表单时，服务器会生成一个 CSRF 令牌，并将其存储在用户的会话中。然后，该令牌将包含在表单中，当用户提交表单时，服务器会验证该令牌是否与存储在用户会话中的令牌匹配。如果不匹配，则请求将被视为不安全的，并被拒绝。因此{% csrf_token %}标签是必需的，以确保表单的安全性。 Index.html<p></p><form role="form" action="index" method="post">   <div class="input-group" style="width:60%;float:left">        <span class="input-group-addon" id="basic-addon1">姓名</span>         {% csrf_token %}         <input type="text" class="form-control" name="name" placeholder="ChengRui" aria-describedby="basic-addon1">    </div>    <input class="btn btn-primary btn-lg" type="submit" value="学生成绩查询" role="button" style="width:30%:float:right"></form><p></p><p></p><form role="form" action="index" method="post">   <div class="input-group" style="width:60%;float:left">        <span class="input-group-addon" id="basic-addon2">学号</span>         {% csrf_token %}         <input type="text" class="form-control" name="no" placeholder="20200107134" aria-describedby="basic-addon1">    </div>    <input class="btn btn-primary btn-lg" type="submit" value="学生成绩查询" role="button" style="width:30%:float:right"></form><p></p><p></p><p></p><form role="form" action="index" method="post">   <div class="input-group" style="width:20%;float:left">        <span class="input-group-addon" id="basic-addon3-1">姓名</span>         {% csrf_token %}         <input type="text" class="form-control" name="nname" placeholder="ChengRui" aria-describedby="basic-addon1">    </div>   <div class="input-group" style="width:20%;float:left">        <span class="input-group-addon" id="basic-addon3-2">学号</span>         {% csrf_token %}         <input type="text" class="form-control" name="nno" placeholder="20200107134" aria-describedby="basic-addon1">    </div>   <div class="input-group" style="width:20%;float:left">        <span class="input-group-addon" id="basic-addon3-3">成绩</span>         {% csrf_token %}         <input type="text" class="form-control" name="ngrade" placeholder="100" aria-describedby="basic-addon1">    </div>    <input class="btn btn-primary btn-lg" type="submit" value="录入成绩记录" role="button" style="width:30%:float:right"></form><p></p><p></p><form role="form" action="index" method="post">   <div class="input-group" style="width:60%;float:left;display:none">        <span class="input-group-addon" id="basic-addon4">所有</span>         {% csrf_token %}         <input type="text" class="form-control" name="all" value="all" aria-describedby="basic-addon1">    </div>    <input class="btn btn-primary btn-lg" type="submit" value="查询所有记录" role="button" style="width:30%:float:right"></form><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol><li>Li, J., &amp; Zhang, Y. (2017). Research on anti-tampering technology of dynamic web pages. Journal of Computer Applications, 37(9), 2675-2679.</li><li>Wang, Y., &amp; Liu, J. (2018). A dynamic web page anti-tampering scheme based on blockchain technology. Journal of Network and Computer Applications, 116, 1-9.</li><li>Zhang, H., &amp; Ma, Y. (2019). A dynamic web page anti-tampering scheme based on machine learning. Journal of Information Security and Applications, 47, 1-9.</li><li>Zhou, Y., &amp; Li, X. (2020). A dynamic web page anti-tampering scheme based on cloud computing. Journal of Computational Science, 41, 1-9.</li><li>王永强, 朱勇, 肖翔等. 基于 AES 的动态网页防篡改技术[J]. 计算机科学, 2011, 38(5): 231-233.</li><li>朱勇, 王永强, 肖翔等. 基于 AES 的动态网页防篡改技术研究[J]. 电脑知识与技术, 2011, 7(25): 6038-6040.</li><li>赵磊, 胡志勇, 陈琳等. 基于 AES 的动态网页防篡改技术研究[J]. 计算机工程与设计, 2013, 34(2): 775-778.</li><li>胡志勇, 赵磊, 刘洋等. 基于 AES 的动态网页防篡改技术研究与实现[J]. 计算机应用, 2013, 33(8): 2256-2259.</li><li>郑秀娟, 邓燕, 王文杰等. 基于 AES 的动态网页防篡改技术研究[J]. 计算机工程与应用, 2014, 50(10): 98-100.</li></ol></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Python/" class="category-chain-item">Python</a> <span>></span> <a href="/categories/Python/Django/" class="category-chain-item">Django</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/ITS/">#ITS</a> <a href="/tags/Python/">#Python</a> <a href="/tags/Django/">#Django</a> <a href="/tags/%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E9%98%B2%E7%AF%A1%E6%94%B9/">#动态网页防篡改</a></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2023/07/25/TRS/" title="TRS"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">TRS</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2023/05/07/Docker/" title="docker"><span class="hidden-mobile">docker</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",function(){var e=Object.assign({appId:"NZzmWHo4vLeDsTh3MaGJBfT1-gzGzoHsz",appKey:"EaF7VkHeBkgVwTLy7IHYmPIs",path:"window.location.pathname",placeholder:"留下你的评论吧",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:5,lang:"zh-CN",highlight:!1,recordIP:!1,serverURLs:"https://nzzmwho4.lc-cn-n1-shared.com",emojiCDN:"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/",emojiMaps:null,enableQQ:!1,enable:!0},{el:"#valine",path:window.location.pathname});new Valine(e),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var e="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(e),Fluid.plugins.fancyBox(e)})})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div style="font-size:.85rem"><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div><div id="music_div" style="position:fixed;bottom:0;left:30px"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="110" src="//music.163.com/outchain/player?type=0&id=919444742&auto=1&height=90"></iframe><script src="https://cdn.staticfile.org/jquery/3.3.1/jquery.min.js"></script><script src="/js/musicshow.js"></script></div></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">本Blog总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">苏ICP备2023020951号-1</a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){var t;"tocbot"in window&&(tocbot.refresh(),0!==(t=jQuery("#toc")).length)&&tocbot&&0<t.find(".toc-list-item").length&&t.css("visibility","visible")}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback(function(){if("anchors"in window){anchors.removeAll();var n,o=[];for(n of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))o.push(".markdown-body > "+n.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/yinghua.js"></script><script src="/js/love.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/shizuku.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!0},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>